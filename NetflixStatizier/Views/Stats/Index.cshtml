@model NetflixStatizier.Models.ViewModels.NetflixStatsViewModel

@{
    ViewData["Title"] = "Results";
}

<div class="main-content">
    <!-- Tabstrip -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="nav-item">
            <a class="nav-link active" href="#overview" role="tab" data-toggle="tab">Overview</a>
        </li>
        <li role="presentation" class="nav-item">
            <a class="nav-link" href="#per-serie" role="tab" data-toggle="tab">Per serie</a>
        </li>
        <li role="presentation" class="nav-item">
            <a class="nav-link" href="#per-day" role="tab" data-toggle="tab">Per day</a>
        </li>
        <li role="presentation" class="nav-item">
            <a class="nav-link" href="#per-daytime" role="tab" data-toggle="tab">Per daytime</a>
        </li>
        <li role="presentation" class="nav-item">
            <a class="nav-link" href="#share-export" role="tab" data-toggle="tab">Share / export</a>
        </li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane fade show active" id="overview">
            <h2>You have wasted a total of @(Model.TotalViewedTime.Hours)h @(Model.TotalViewedTime.Minutes)m watching TV shows and movies on Netflix.</h2>
            <br />
            <h2>You have watched @Model.SeriesEpisodesViewedItemsCount episodes of TV shows and @Model.MoviesViewedCount movies.</h2>
            <br />
            <h2>Your highscore day was the @(Model.HighscoreDate.ToString("dd-MM-yyyy")). On this day, you wasted @(Model.HighcoreTime.Hours)h @(Model.HighcoreTime.Minutes)m on Netflix.</h2>
        </div>

        <div role="tabpanel" class="tab-pane fade" id="per-serie">
            <canvas id="timePerSerieBarChart" height="@(Model.ViewedHoursPerSerieChart.Data.Labels.Count * 5)" role="img">
                <p>Your browser sadly does not support the canvas element. This means no charts can be displayed :(</p>
            </canvas>
        </div>

        <div role="tabpanel" class="tab-pane fade" id="per-day">
            <canvas id="timePerDateBarChart" height="@(Model.ViewedHoursPerDayChart.Data.Labels.Count * 3.5)" role="img">
                <p>Your browser sadly does not support the canvas element. This means no charts can be displayed :(</p>
            </canvas>
        </div>

        <div role="tabpanel" class="tab-pane fade" id="per-daytime">
            <div class="container">
                <canvas id="hourlyWatchedRadioChart" role="img">
                    <p>Your browser sadly does not support the canvas element. This means no charts can be displayed :(</p>
                </canvas>
            </div>
        </div>

        <div role="tabpanel" class="tab-pane fade" id="share-export">
            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Export results as...
                </a>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <a class="dropdown-item" asp-controller="Stats" asp-action="Export" asp-route-identifier="@Model.Identifier" asp-route-format="json">JSON</a>
                    <a class="dropdown-item" asp-controller="Stats" asp-action="Export" asp-route-identifier="@Model.Identifier" asp-route-format="xml">XML</a>
                    <a class="dropdown-item" asp-controller="Stats" asp-action="Export" asp-route-identifier="@Model.Identifier" asp-route-format="csv">CSV</a>
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts
{
    <partial name="_ChartScriptsPartial" />
    <script>
        @Html.Raw(Model.ViewedHoursPerSerieChart.CreateChartCode("timePerSerieBarChart"))
        @Html.Raw(Model.ViewedHoursPerDayChart.CreateChartCode("timePerDateBarChart"))
        @Html.Raw(Model.HourlyActivityChart.CreateChartCode("hourlyWatchedRadioChart"))
    </script>
}